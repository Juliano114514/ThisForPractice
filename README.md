### 音乐播放控制练手 - MVVM 架构原理

#### MVVM 架构概述
MVVM（Model-View-ViewModel）架构将应用程序分为三个独立的部分：
1. **模型（Model）**
    - 简单的数据对象，表示应用程序的状态。
    - 负责数据处理、业务逻辑和与外部系统（如数据库、API）的交互。

2. **视图（View）**
    - 负责 UI 渲染和用户交互。
    - 观察 ViewModel 的状态变化，并更新 UI。
    - 与 ViewModel 解耦，不直接依赖于业务逻辑。

3. **视图模型（ViewModel）**
    - 负责逻辑部分，作为 Model 和 View 之间的中介。
    - 维护 UI 相关的状态和逻辑。
    - 与 View 建立观察关系，当数据变化时通知 View。

---

### 收藏管理

#### 可观察数据：`MutableLiveData`
- `MutableLiveData` 用于持有可观察的数据。
- 当数据发生变化时，会自动通知所有观察者。
- 常用于存储 UI 相关的状态（如播放列表、收藏状态）。

#### 可变集合：`MutableSet`
- `MutableSet` 继承自 `Set`，但允许修改（添加/删除元素）。
- 比 `LiveData<Set<String>>` 更灵活，可以直接修改集合内容。
- 创建方式：`mutableSetOf()`（Kotlin 标准函数）。

#### 列表类型
- **不可修改列表**
    - 使用 `listOf()` 创建。
    - 多个相同元素的列表可能会被单例化（优化性能）。

- **可修改列表**
    - 使用 `MutableList`（Kotlin 实现，基于 `ArrayList`）。
    - 支持动态添加/删除元素。
    - 底层实现：`ArrayList`（兼容性好，但可能不支持所有 Kotlin 特性）。

---

### 关于 LiveData
- **核心特性**
    - 数据变化时自动触发回调，更新 UI。
    - **生命周期感知**：仅在活跃生命周期（如 `STARTED`）中更新 UI。
    - **避免内存泄漏**：不会持有对已销毁 View 的强引用。
    - **线程安全**：
        - 支持在任意线程修改数据。
        - 回调默认在主线程执行（保证 UI 安全）。

- **使用场景**
    - 管理音乐播放状态、收藏列表、播放历史等可观察数据。

---

### 总结
- MVVM 架构分离关注点，提高代码可维护性。
- `ViewModel` 中使用 `MutableLiveData` 和 `MutableSet` 管理音乐收藏状态。
- `LiveData` 的生命周期感知和线程安全特性是其核心优势。


